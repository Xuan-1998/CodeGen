Tree dp based on subtree sizes and the number of ways to arrange children permutations
Recursive post-order traversal combined with dynamic programming to keep track of subtree sizes and the number of valid permutations for each subtree.
