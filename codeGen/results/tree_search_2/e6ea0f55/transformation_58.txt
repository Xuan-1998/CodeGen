Memoization can be used to optimize the recursive function by storing previously computed values in a dictionary to avoid redundant calculations.
The state is the maximum sum of the subsequence ending at each position, and the base case is when the array is empty or only contains one element.
Define the state as a pair (i, prev_index) where i is the index of the current position in the array, and prev_index is the index of the previous element in the subsequence. The transition relationship can be defined as dp(i, prev_index) = max(dp(j-1, j-i) + nums[i] for j from prev_index+1 to min(prev_index+k, n)).
Define a 2D array dp where dp[i][j] represents the maximum sum of the subsequence ending at index i with the previous element's index being j, then fill up the dp table bottom-up and finally return the last value in the dp table as the result.
