===BEGIN PLAN===
The sequence values are used in the transitions, so we should focus on identifying the relationships between the state space (sequence length) and the transition rules.

The state is just y, as we only care about the final value of y.

Consider the current state y and the next sequence element a_x to be the key for transitions.
Use a dictionary to store the transition values as a function of (y, a_x) and update y accordingly.

As long as x <= n, keep updating y based on the transition rules until x > n or x <= 0. If either condition is met, stop the simulation and output the final value of y.

===END PLAN===
