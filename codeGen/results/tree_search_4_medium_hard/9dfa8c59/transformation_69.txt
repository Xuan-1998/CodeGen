===BEGIN PLAN===
Develop an iterative solution by generating all prime numbers up to n_max, then checking the number of permutations for each one.
Consider the state as a tuple (n, k_perms_count) where n is the current prime number and k_perms_count is the count of its permutations that are less than or equal to k_perms.

===END PLAN===
