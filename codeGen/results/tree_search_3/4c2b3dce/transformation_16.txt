===BEGIN PLAN===
Does the string contain a substring 'AB' followed by 'BA'? If so, we can use this as an opportunity to split the problem into two smaller instances.

Whether the string is a concatenation of two substrings, where one contains 'AB' and the other contains 'BA'.

Whether the last encountered substring contains 'AB' and the remaining part of the string contains 'BA'

Explore using a prefix tree data structure to quickly determine if 'AB' or 'BA' appears in the string as a whole, then check the remaining substring for the other pattern.

===END PLAN===
